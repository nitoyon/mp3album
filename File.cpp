
// File.cpp
//============================================================================//
// 更新：02/12/15(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

#include "File.h"


/******************************************************************************/
//		コンストラクタおよびデストラクタ
/******************************************************************************/
// 
//============================================================================//
// 更新：02/12/08(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

File::File( const string s) 
: strPath( s)
{
}


/******************************************************************************/
// 
//============================================================================//
// 更新：02/12/08(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

File::~File() 
{
}



/******************************************************************************/
//		ファイルパス関連
/******************************************************************************/
// ファイル名
//============================================================================//
// 更新：02/12/08(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

string File::GetFileName() const 
{
	if( strPath == "")
	{
		return "" ;
	}

	int i = GetBasePath().size() ;

	// フォルダの場合
	if( i >= strPath.size())
	{
		return "" ;
	}
	else
	{
		return strPath.substr( i) ;
	}
}


/******************************************************************************/
// ベースパス
//============================================================================//
// 更新：02/12/15(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

string File::GetBasePath() const
{
	if( strPath == "")
	{
		return "" ;
	}

	int	intLastYen = 0 ;
	char	pszFile[ MAX_PATH] ;
	char*	pszPointer = pszFile ;
	strcpy( pszFile, strPath.c_str()) ;

	for( int i = 0; i < strPath.size(); i++)
	{
		pszPointer = pszFile + i ;

		if( IsDBCSLeadByte( *pszPointer))
		{
			// ２バイト文字なら２進む
			i++ ;
			continue ;
		}

		if( *pszPointer == '\\')
		{
			intLastYen = i ;
		}
	}

	if( intLastYen > 0)
	{
		return strPath.substr( 0, intLastYen + 1) ;	// Yen も含めて返す
	}
	else
	{
		return "" ;
	}
}


/******************************************************************************/
// 
//============================================================================//
// 更新：02/12/08(日)
// 概要：なし。
// 補足：なし。
//============================================================================//

string File::GetFilePath() const 
{
	return strPath ;
}

